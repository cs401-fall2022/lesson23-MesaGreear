extends layout

block content
  h1= title
  p Welcome to #{title}

  //display an unordered list of every post in posts
  ul(class='postList')
    each post in posts_data 
      li #{post.post_id} - #{post.post_txt}

      form(action="/addComment" method="POST")
        div
            label(for=("comment" + post.post_id + "Text"))
            input(name="commentText" id=("comment" + post.post_id + "Text") value="New comment text here!")
            //TODO: 
            //This solution is like, really bad. I however cannot find any other way to sent the post_id of the
            //parent post to /addComment except for creating a hidden input with a set value that equals post_id
            input(name="commentParentPostID" id=("comment" + post.post_id + "ParentPostID") value=post.post_id class="hidden" readonly)
            button Send my comment
        div
          p
      form(action="/deletePost" method="POST")
        div 
          //TODO:
          input(name="deletePost" id=("post" + post.post_id + "delete") value=post.post_id class="hidden" readonly)
          button Delete this post

      //display an unordered list of every comment in comments that has a post_id
      //that matches the post_id of the post it will be rendered underneath
      ul(class='commentList')
        each comment in comments_data 
          if comment.post_id == post.post_id
            li #{comment.comment_id} - #{comment.comment_txt}

            form(action="/" method="POST")
              div 
                button Delete this comment
  
  //how to add a new post to posts
  h2 New Post!
  form(action="/addPost" method="POST")
    div
        label(for="postText")
        input(name="postText" id="postText" value="New post text here!")
        button Send my post